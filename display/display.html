<!-- influenced by http://mkweb.bcgsc.ca/pi/art/ -->
<script src="https://d3js.org/d3.v4.min.js"></script>
<link href="https://fonts.googleapis.com/css?family=Frank+Ruhl+Libre" rel="stylesheet">
<link rel = 'shortcut icon' href = 'favi.ico'>
<title>Pi Visualization</title>
<style>
  div.tooltip {
    position: absolute;
    text-align: center;
    width: 28px;
    height: 28px;
    padding: 2px;
    font: 26px sans-serif;
    font-family:'Open Sans', sans-serif;
    vertical-align: text-top;
    background: white;
    border: 0px;
    border-radius: 6px;
    pointer-events: none;
  }
  *{
    font-family: 'Frank Ruhl Libre', serif;
  }
  svg{
    /* border: 1px solid #ccc; */
  }
  body{
    background-color: black;
  }
  h2{
    color:white;
    font-size: 40;
    text-align: center;
    margin-bottom: -10;
  }
</style>
<body>
  <h2>
    500 Digits of &Pi;
  </h2>
  <div id = 'main' align = 'center'>
  <div id = 'tooltip'></div>
    <script>
      var height = 550;
      var width = 800;

      var svg = d3.select('#main')
        .append('svg')
        .attr('height', height)
        .attr('width', width);
      var div = d3.select('body')
        .append('div')
        .attr('class', 'tooltip')
        .style('opacity', 1);
      d3.csv('pi.txt', function(data){
        var digits = data.columns;
        var test = digits[0];
        var split = test.split('').map(Number)
        //console.log(split);
      function printLine(start, end, y){
        var index = 0;
        for(var i = start; i < end; i++){
          switch(split[i]){
            case 0:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#0499E8')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('0')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 1:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#FFC139')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('1')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 2:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#4C359D')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('2')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 3:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#0FF6A3')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('3')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 4:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#E02F3E')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('4')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 5:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#3EC2C3')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('5')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 6:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#FE5C14')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('6')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 7:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#FF166E')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('7')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 8:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#1D2287')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('8')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            case 9:
            svg.append('circle')
              .attr('cx', index * 30 + 40)
              .attr('cy', 30 + y)
              .attr('r', 10)
              .style('fill', '#069D41')
              .on('mouseover', function(d, i){
                div.transition()
                .duration(1)
                .style('opacity', 1);
                div.text('9')
                .style('left', (d3.event.pageX) + 'px')
                .style('top', (d3.event.pageY - 20) + 'px')
              })
              .on('mouseout', function(d){
                div.transition()
                .duration(500)
                .style('opacity', 0);
              })
              break;
            }
            index++;
          }
      }
      for(var j = 0; j < 20; j++){
        printLine(j * 25, 25 *(j + 1), j * 28)
      }

      })

    </script>
  </div>
</body>
